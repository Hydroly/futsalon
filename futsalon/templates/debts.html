{% extends "base.html" %}
{% block content %}
<h2 class="text-2xl font-bold mb-4 text-blue-800">گزارش بدهی‌ها</h2>
<table class="w-full w-full bg-white shadow-xl rounded-xl overflow-hidden">
    <thead>
        <tr class="bg-gradient-to-r from-blue-700 to-blue-800 text-white">
            <th class="p-2">نام</th>
            <th class="p-2">سانس‌ها</th>
            <th class="p-2">بدهی کل</th>
            <th class="p-2">تسویه شده</th>
            <th class="p-2">باقیمانده</th>
            <th class="p-2">تسویه جدید</th>
        </tr>
    </thead>
    <tbody>
        {% for player in players %}
        {% set debt = debts[player.id] %}
        <tr>
            <td class="p-2">{{ player.name }}</td>
            <td class="p-2">{{ debt.count }}</td>
            <td class="p-2">{{ debt.total_debt }}</td>
            <td class="p-2">{{ debt.paid }}</td>
            <td {% if debt.remaining > 0 %}class="bg-red-100 font-bold"{% endif %}>{{ debt.remaining }}</td>
            <td class="p-2">
                <form method="post" action="/payments">
                    <input type="hidden" name="player_id" value="{{ player.id }}">
                    <input type="number" name="amount" placeholder="مبلغ" class="p-1 border">
                    <button type="submit" class="bg-green-500 text-white p-1 rounded">تسویه</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}